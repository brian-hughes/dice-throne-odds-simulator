<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Dice Throne Simulator</title>
    <style>
* { box-sizing: border-box; }
body { font-family: system-ui, Arial, sans-serif; background: #f4f6fb; padding: 20px; }
#app { max-width: 1200px; margin: 0 auto; }
h1 { text-align: center; margin-bottom: 12px }
h2 { margin-top: 20px; margin-bottom: 12px; }
.controls { display:flex; gap:12px; align-items:center; margin-bottom:12px; flex-wrap: wrap }
select { padding:8px; font-size:14px }
.logging-toggle { display:flex; align-items:center; gap:6px; cursor:pointer; font-weight:500 }
.logging-toggle input[type="checkbox"] { cursor:pointer; width:18px; height:18px }
.hero-faces { display: flex; gap: 12px; margin-top: 12px; flex-wrap: wrap }
.hero-face-item { display: flex; flex-direction: column; align-items: center; gap: 6px }
.dice-icon { width: 20px; height: 20px; background: #fff; border: 0px solid #ddd; border-radius: 4px; display: flex; align-items: center; justify-content: center; position: relative; font-size: 28px; }
.dice-1::after { content: '⚀'; }
.dice-2::after { content: '⚁'; }
.dice-3::after { content: '⚂'; }
.dice-4::after { content: '⚃'; }
.dice-5::after { content: '⚄'; }
.dice-6::after { content: '⚅'; }
.hero-face-label { font-weight: 500; font-size: 14px; color: #333 }
.dice-row { display:flex; gap:12px; margin-bottom: 12px }
.die-box { background: white; border-radius:8px; padding:8px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
.face-buttons { display:flex; gap:6px; flex-wrap:wrap }
.face-btn, .random-btn { padding:6px 10px; border-radius:6px; border:1px solid #ddd; cursor:pointer; background: #fff }
.face-btn.active, .random-btn.active { background:#3b82f6; color:white; border-color: #3b82f6 }
.roll-button { display:block; margin: 12px 0; padding:10px 14px; font-weight:700; background:#10b981; color:white; border:none; border-radius:8px; cursor:pointer }
.roll-button:hover { background:#059669 }
.modifiers-box { background: white; border-radius:8px; padding:12px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); margin-bottom: 12px }
.modifier-toggle { display:flex; align-items:center; gap:8px; cursor:pointer; font-weight:500 }
.modifier-toggle input[type="checkbox"] { cursor:pointer; width:18px; height:18px }
.logs-box { background: white; border-radius:8px; padding:12px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); margin-bottom: 12px; max-height: 300px; overflow-y: auto; font-family: monospace; font-size: 12px }
.log-line { padding: 4px 0; border-bottom: 1px solid #e5e7eb; line-height: 1.4 }
.log-line:last-child { border-bottom: none }
.results-table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.06) }
.results-table th { background: #f3f4f6; font-weight: 600; padding: 12px; text-align: left; border-bottom: 2px solid #e5e7eb }
.results-table td { padding: 12px; border-bottom: 1px solid #e5e7eb }
.results-table tr:last-child td { border-bottom: none }
.results-table tr:hover { background: #f9fafb }
.abilities { margin-top:8px }



    </style>
  </head>
  <body>
    <div id="app"></div>
    <script>
(()=>{var w=Object.defineProperty;var x=(e,i)=>()=>(e&&(i=e(e=0)),i);var $=(e,i)=>{for(var o in i)w(e,o,{get:i[o],enumerable:!0})};var O=x(()=>{});var P={};$(P,{dieNumberToFace:()=>b,rollDie:()=>W,simulate:()=>X});function W(){return Math.floor(Math.random()*6)+1}function b(e,i){return i.customDieFaces[e-1]}function X(e,i,o=1e4,t=!1,n=!1,d=!1,s=!1){let r=new Map;e.abilities.forEach(l=>r.set(l.name,0));let c=n?[]:[];for(let l=0;l<o;l++){let a=[];for(let C=0;C<5;C++){let p=i[C];p!=null?a.push(p):a.push(W())}n&&c.push([...a]);let u=a.map(C=>b(C,e));e.abilities.forEach(C=>{let p=R(C,u,a);if(!p&&t)for(let E=0;E<5;E++){let f=[...a];f[E]=6;let T=f.map(h=>b(h,e));if(R(C,T,f)){p=!0;break}}if(!p&&d)for(let E=0;E<5;E++){for(let f=1;f<=6;f++){let T=[...a];T[E]=f;let h=T.map(L=>b(L,e));if(R(C,h,T)){p=!0;break}}if(p)break}if(!p&&s)for(let E=0;E<5;E++){for(let f=E+1;f<5;f++){for(let T=1;T<=6;T++){for(let h=1;h<=6;h++){let L=[...a];L[E]=T,L[f]=h;let G=L.map(K=>b(K,e));if(R(C,G,L)){p=!0;break}}if(p)break}if(p)break}if(p)break}p&&r.set(C.name,(r.get(C.name)||0)+1)})}let m=[];return e.abilities.forEach(l=>{let a=r.get(l.name)||0;m.push({ability:l,activations:a,probability:a/o})}),{results:m,initialRolls:n?c:void 0}}function R(e,i,o){let t=e.condition;if(!t)return!1;if(t.straightType&&o){if(t.straightType==="smallStraight")return j(o);if(t.straightType==="largeStraight")return V(o)}if(t.requiredFaces){for(let[n,d]of Object.entries(t.requiredFaces))if(i.filter(r=>r===n).length<(d??0))return!1;return!0}if(t.anyOfFaces&&t.anyOfFaces.length>0)return i.some(n=>t.anyOfFaces.includes(n));if(t.face&&t.count)return i.filter(d=>d===t.face).length>=t.count;if(t.value!==void 0){let n=String(t.value);return i.some(d=>d===n)}return t.face?i.some(n=>n===t.face):!1}function j(e){let i=[...new Set(e)].sort((t,n)=>t-n);return[[1,2,3,4],[2,3,4,5],[3,4,5,6]].some(t=>t.every(n=>i.includes(n)))}function V(e){let i=[...new Set(e)].sort((t,n)=>t-n);return[[1,2,3,4,5],[2,3,4,5,6]].some(t=>t.every(n=>i.includes(n)))}var D=x(()=>{O()});var H=[{id:"artificer",name:"Artificer",color:"#8B0000",customDieFaces:["WRENCH","WRENCH","WRENCH","GEAR","GEAR","BOLT"],abilities:[{name:"SPANNER STRIKE",condition:{requiredFaces:{WRENCH:3},description:"Core"}},{name:"SCHEMATICS",condition:{requiredFaces:{GEAR:3,BOLT:1},description:"Core"}},{name:"EUREKA",condition:{requiredFaces:{WRENCH:2,GEAR:3},description:"Core"}},{name:"JOLT",condition:{straightType:"smallStraight",description:"Core"}},{name:"ZAPPPP!",condition:{straightType:"largeStraight",description:"Core"}},{name:"OVERCLOCK",condition:{requiredFaces:{BOLT:4},description:"Core"}},{name:"MAXIMUM POWER",condition:{requiredFaces:{BOLT:5},description:"Core"}},{name:"POWER UP",condition:{requiredFaces:{BOLT:3},description:"Upgrade"}},{name:"NUTS N' BOLTS",condition:{requiredFaces:{WRENCH:3,BOLT:1},description:"Upgrade"}},{name:"SWARMING BOTS",condition:{requiredFaces:{WRENCH:1,GEAR:2,BOLT:1},description:"Upgrade"}},{name:"SCRATCH BUILT",condition:{requiredFaces:{WRENCH:2,GEAR:2},description:"Upgrade"}}]},{id:"jean_grey",name:"Jean Grey",color:"#8B0000",customDieFaces:["ASTRAL","ASTRAL","ASTRAL","CONTROL","CONTROL","PHOENIX"],abilities:[{name:"MIND ATTACK",condition:{requiredFaces:{ASTRAL:3},description:"Core"}},{name:"PSYCHIC MULTIPLIER",condition:{requiredFaces:{CONTROL:3},description:"Core"}},{name:"OCCLUSION",condition:{requiredFaces:{ASTRAL:1,CONTROL:2,PHOENIX:1},description:"Core"}},{name:"ASTRAL COMBAT (SMALL STRAIGHT)",condition:{straightType:"smallStraight",description:"Core"}},{name:"ASTRAL COMBAT (LARGE STRAIGHT)",condition:{straightType:"largeStraight",description:"Core"}},{name:"TELEKINETIC BLAST",condition:{requiredFaces:{ASTRAL:3,PHOENIX:2},description:"Core"}},{name:"FIREBIRD",condition:{requiredFaces:{PHOENIX:4},description:"Core"}},{name:"ONE TRUE PHOENIX",condition:{requiredFaces:{PHOENIX:5},description:"Core"}},{name:"PSIONIC JOLT",condition:{requiredFaces:{ASTRAL:2,PHOENIX:2},description:"Upgrade"}},{name:"ESSENSE",condition:{requiredFaces:{PHOENIX:3},description:"Upgrade"}},{name:"SUPER OCCLUSION",condition:{requiredFaces:{ASTRAL:1,CONTROL:3,PHOENIX:1},description:"Upgrade"}},{name:"PSYCHIC MULTIPLICITY",condition:{requiredFaces:{CONTROL:5},description:"Upgrade"}}]},{id:"pirate",name:"Cursed Pirate",color:"#000000",customDieFaces:["CUTLASS","CUTLASS","CUTLASS","BOOTY","BOOTY","SKULL"],abilities:[{name:"CUTLASS STRIKE",condition:{requiredFaces:{CUTLASS:3},description:"Core"}},{name:"X MARKS THE SPOT",condition:{requiredFaces:{BOOTY:3},description:"Core"}},{name:"WALK THE PLANK",condition:{requiredFaces:{CUTLASS:1,BOOTY:2,SKULL:1},description:"Core"}},{name:"LIGHT THE FUSE (SMALL STRAIGHT)",condition:{straightType:"smallStraight",description:"Core"}},{name:"LIGHT THE FUSE (LARGE STRAIGHT)",condition:{straightType:"largeStraight",description:"Core"}},{name:"SHIVER ME TIMBERS",condition:{requiredFaces:{CUTLASS:1,SKULL:3},description:"Core"}},{name:"BLACK SPOT",condition:{requiredFaces:{SKULL:4},description:"Core"}},{name:"PIRATES TOUCH!",condition:{requiredFaces:{SKULL:5},description:"Core"}}]},{id:"pirate_2",name:"Cursed Pirate (Flipped)",color:"#000000",customDieFaces:["CUTLASS","CUTLASS","CUTLASS","BOOTY","BOOTY","SKULL"],abilities:[{name:"SOUL CUTLASS",condition:{requiredFaces:{CUTLASS:3},description:"Core"}},{name:"DREAD MARK",condition:{requiredFaces:{BOOTY:3},description:"Core"}},{name:"ABYSSAL WALK",condition:{requiredFaces:{CUTLASS:1,BOOTY:2,SKULL:1},description:"Core"}},{name:"THAR SHE BLOWS (SMALL STRAIGHT)",condition:{straightType:"smallStraight",description:"Core"}},{name:"THAR SHE BLOWS (LARGE STRAIGHT)",condition:{straightType:"largeStraight",description:"Core"}},{name:"THE SHIVERING",condition:{requiredFaces:{CUTLASS:1,SKULL:3},description:"Core"}},{name:"BLACK SOUL",condition:{requiredFaces:{SKULL:4},description:"Core"}},{name:"CURSED TOUCH!",condition:{requiredFaces:{SKULL:5},description:"Core"}}]},{id:"rogue",name:"Rogue",color:"#2F4F4F",customDieFaces:["TOUCH","TOUCH","TOUCH","SOAR","SOAR","ION"],abilities:[{name:"BRAWL",condition:{requiredFaces:{TOUCH:3},description:"Core"}},{name:"SASS",condition:{requiredFaces:{TOUCH:2,ION:2},description:"Core"}},{name:"LEACH",condition:{requiredFaces:{TOUCH:1,SOAR:3},description:"Core"}},{name:"ABSORPTION (SMALL STRAIGHT)",condition:{straightType:"smallStraight",description:"Core"}},{name:"ABSORPTION (LARGE STRAIGHT)",condition:{straightType:"largeStraight",description:"Core"}},{name:"SKYBOUND",condition:{requiredFaces:{SOAR:2,ION:2},description:"Core"}},{name:"INFLUENTIAL",condition:{requiredFaces:{ION:4},description:"Core"}},{name:"HIGH ALTITUDE",condition:{requiredFaces:{ION:5},description:"Core"}},{name:"UNDERDOG",condition:{requiredFaces:{TOUCH:3,ION:2},description:"Upgrade"}},{name:"TO THE CLOUDS",condition:{requiredFaces:{SOAR:3,ION:2},description:"Upgrade"}},{name:"RECIPROCATE",condition:{requiredFaces:{ION:3},description:"Upgrade"}}]}];O();function y(e){e.innerHTML="";let i=document.createElement("h1");i.textContent="Dice Throne Roll Simulator",e.appendChild(i);let o=document.createElement("div");o.className="controls",e.appendChild(o);let t=document.createElement("select");t.id="hero-select",o.appendChild(t);let n=document.createElement("select");n.id="trials-select",[1,10,100,1e3,1e4].forEach(E=>{let f=document.createElement("option");f.value=String(E),f.textContent=`${E} Trials`,E===1e4&&(f.selected=!0),n.appendChild(f)}),o.appendChild(n);let s=document.createElement("label");s.className="logging-toggle";let r=document.createElement("input");r.type="checkbox",r.id="logging-toggle",s.appendChild(r);let c=document.createElement("span");c.textContent="Log Rolls",s.appendChild(c),o.appendChild(s);let m=document.createElement("div");m.id="hero-info",e.appendChild(m);let l=document.createElement("div");l.id="dice-area",e.appendChild(l);let a=document.createElement("div");a.id="modifiers-area",e.appendChild(a);let u=document.createElement("button");u.textContent=`Run ${1e4} Trials`,u.className="roll-button",e.appendChild(u);let C=document.createElement("div");C.id="logs-area",e.appendChild(C);let p=document.createElement("div");return p.id="results",e.appendChild(p),{heroSelect:t,trialsSelect:n,heroInfo:m,diceArea:l,modifiersArea:a,rollBtn:u,logsArea:C,results:p,loggingCheckbox:r}}function N(e,i){e.innerHTML="";let o=document.createElement("option");o.value="",o.textContent="-- Select Hero --",e.appendChild(o),i.forEach(t=>{let n=document.createElement("option");n.value=t.id,n.textContent=t.name,e.appendChild(n)})}function U(e,i){if(e.innerHTML="",!i)return;let o=document.createElement("h2");o.textContent=i.name,e.appendChild(o);let t=document.createElement("div");t.className="hero-faces",i.customDieFaces.forEach((n,d)=>{let s=document.createElement("div");s.className="hero-face-item";let r=document.createElement("div");r.className=`dice-icon dice-${d+1}`,s.appendChild(r);let c=document.createElement("span");c.className="hero-face-label",c.textContent=n,s.appendChild(c),t.appendChild(s)}),e.appendChild(t)}function q(e,i){e.innerHTML="";let o=document.createElement("h2");if(o.textContent="Five Dice",e.appendChild(o),!i){let d=document.createElement("p");d.textContent="Select a hero first.",e.appendChild(d);return}let t=document.createElement("div");t.className="dice-row";let n=[null,null,null,null,null];for(let d=0;d<5;d++){let l=function(){c.querySelectorAll("button").forEach(a=>a.classList.remove("active")),n[d]===null?m.classList.add("active"):m.classList.remove("active"),c.querySelectorAll(".face-btn").forEach(a=>{let u=a;parseInt(u.textContent)===n[d]?u.classList.add("active"):u.classList.remove("active")})},s=document.createElement("div");s.className="die-box";let r=document.createElement("div");r.className="die-label",r.textContent=`Die ${d+1}`,s.appendChild(r);let c=document.createElement("div");c.className="face-buttons";let m=document.createElement("button");m.textContent="Random",m.className="random-btn active",c.appendChild(m),m.onclick=()=>{n[d]=null,l()};for(let a=1;a<=6;a++){let u=document.createElement("button");u.textContent=String(a),u.title=`Face: ${i.customDieFaces[a-1]}`,u.className="face-btn",u.onclick=()=>{n[d]=a,l()},c.appendChild(u)}s.appendChild(c),t.appendChild(s)}return e.appendChild(t),()=>n.slice()}function v(e,i){e.innerHTML="";let o=document.createElement("h2");if(o.textContent=`Results (${1e4} Trials)`,e.appendChild(o),i.length===0){let r=document.createElement("p");r.textContent="No abilities to display.",e.appendChild(r);return}let t=i.slice().sort((r,c)=>c.probability-r.probability),n=document.createElement("table");n.className="results-table";let d=document.createElement("tr");["Ability Name","Result","Required Rolls","Description"].forEach(r=>{let c=document.createElement("th");c.textContent=r,d.appendChild(c)}),n.appendChild(d),t.forEach(r=>{let c=document.createElement("tr"),m=document.createElement("td");m.textContent=r.ability.name,c.appendChild(m);let l=document.createElement("td");l.textContent=`${(r.probability*100).toFixed(2)}%`,c.appendChild(l);let a=document.createElement("td");a.textContent=Y(r.ability.condition),c.appendChild(a);let u=document.createElement("td");u.textContent=r.ability.condition.description||"\u2014",c.appendChild(u),n.appendChild(c)}),e.appendChild(n)}function Y(e){return e.straightType==="smallStraight"?"Small Straight":e.straightType==="largeStraight"?"Large Straight":e.requiredFaces?Object.entries(e.requiredFaces).map(([o,t])=>`${t}\xD7 ${o}`).join(", "):e.anyOfFaces&&e.anyOfFaces.length>0?`Any of: ${e.anyOfFaces.join(", ")}`:"\u2014"}function B(e){e.innerHTML="";let i=document.createElement("h2");i.textContent="Dice Modifiers (Pick One)",e.appendChild(i);let o=document.createElement("div");o.className="modifiers-box";let t=document.createElement("label");t.className="modifier-toggle";let n=document.createElement("input");n.type="checkbox",n.id="six-it-toggle",t.appendChild(n);let d=document.createElement("span");d.textContent="Six-It: Switch any one die to 6",t.appendChild(d),o.appendChild(t);let s=document.createElement("label");s.className="modifier-toggle";let r=document.createElement("input");r.type="checkbox",r.id="so-wild-toggle",s.appendChild(r);let c=document.createElement("span");c.textContent="So Wild: Change any 1 die to any face",s.appendChild(c),o.appendChild(s);let m=document.createElement("label");m.className="modifier-toggle";let l=document.createElement("input");l.type="checkbox",l.id="twice-as-wild-toggle",m.appendChild(l);let a=document.createElement("span");return a.textContent="Twice as Wild: Change any 2 dice to any faces",m.appendChild(a),o.appendChild(m),e.appendChild(o),{sixItEnabled:()=>n.checked,soWildEnabled:()=>r.checked,twiceAsWildEnabled:()=>l.checked}}function M(e,i){if(e.innerHTML="",!i||i.length===0)return;let o=document.createElement("h2");o.textContent="Dice Rolls Log",e.appendChild(o);let t=document.createElement("div");t.className="logs-box",i.forEach((n,d)=>{let s=document.createElement("div");s.className="log-line",s.textContent=`Trial ${d+1}: ${n.join(", ")}`,t.appendChild(s)}),e.appendChild(t)}O();var J=document.getElementById("app"),S=y(J);N(S.heroSelect,H);var g,I,k=()=>({sixItEnabled:!1,soWildEnabled:!1,twiceAsWildEnabled:!1}),F=1e4;S.trialsSelect.onchange=()=>{F=parseInt(S.trialsSelect.value,10),S.rollBtn.textContent=`Run ${F} Trials`};S.heroSelect.onchange=()=>{let e=S.heroSelect.value;g=H.find(t=>t.id===e),U(S.heroInfo,g),I=q(S.diceArea,g);let o=B(S.modifiersArea);k=()=>({sixItEnabled:o.sixItEnabled(),soWildEnabled:o.soWildEnabled(),twiceAsWildEnabled:o.twiceAsWildEnabled()})};S.rollBtn.onclick=async()=>{if(S.results.innerHTML=`Running ${F} trials...`,!g)return;let e=I?I():[null,null,null,null,null],i=k(),o=S.loggingCheckbox.checked,n=(await Promise.resolve().then(()=>(D(),P))).simulate(g,e,F,i.sixItEnabled,o,i.soWildEnabled,i.twiceAsWildEnabled);M(S.logsArea,n.initialRolls),v(S.results,n.results)};})();

    </script>
  </body>
</html>